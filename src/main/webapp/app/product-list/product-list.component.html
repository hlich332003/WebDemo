<h1>üõçÔ∏è T·∫•t c·∫£ S·∫£n ph·∫©m</h1>

<div class="filter-section">
  <input type="text" [(ngModel)]="searchTerm" (ngModelChange)="onSearchTermChange($event)" placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m..." />
  <select [(ngModel)]="selectedCategorySlug" (change)="onCategoryChange()">
    <option value="all">T·∫•t c·∫£ s·∫£n ph·∫©m</option>
    @for (category of categories; track category.id) {
      <option [value]="category.slug">{{ category.name }}</option>
    }
  </select>
</div>

<h2 class="section-title">T·∫•t c·∫£ s·∫£n ph·∫©m</h2>
<div class="products-grid">
  @if (isLoading) {
    <p>ƒêang t·∫£i s·∫£n ph·∫©m...</p>
  } @else if (filteredProducts.length === 0) {
    <p>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o.</p>
  } @else {
    @for (product of filteredProducts; track product.id) {
      <div class="product-card" (click)="viewProductDetail(product.id)">
        <img [src]="product.imageUrl" [alt]="product.name" loading="lazy" />
        <div class="product-info">
          <h3>{{ product.name }}</h3>
          <p class="price">{{ formatPrice(product.price) }}</p>
          <p class="stock">C√≤n {{ product.quantity }} s·∫£n ph·∫©m</p>
          <div class="product-buttons">
            <button (click)="addToCart(product); $event.stopPropagation()" [disabled]="product.quantity === 0" class="add-to-cart-btn">
              Th√™m v√†o gi·ªè
            </button>
          </div>
        </div>
      </div>
    }
    <!-- ƒê√≥ng kh·ªëi @for -->
  }
  <!-- ƒê√≥ng kh·ªëi @else if (filteredProducts.length === 0) -->
</div>

<!-- Ph√¢n trang -->
@if (filteredProducts.length > 0) {
  <div class="d-flex justify-content-center">
    <jhi-item-count [params]="{ page, totalItems, itemsPerPage }" />
  </div>

  <div class="d-flex justify-content-center">
    <ngb-pagination
      [collectionSize]="totalItems"
      [(page)]="page"
      [pageSize]="itemsPerPage"
      [maxSize]="5"
      [rotate]="true"
      [boundaryLinks]="true"
      (pageChange)="transition()"
    ></ngb-pagination>
  </div>
}
