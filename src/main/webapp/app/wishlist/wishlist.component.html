<div class="wishlist-container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Danh sách yêu thích</h1>
    <!-- Button to clear wishlist removed as the method was removed from the service -->
  </div>

  @if (wishlistItems$ | async; as products) {
    @if (products.length > 0) {
      <div class="wishlist-grid">
        @for (product of products; track product.id) {
          <div class="product-card">
            <img
              [src]="product.imageUrl || 'content/images/default-product.svg'"
              [alt]="product.name"
              class="product-image"
              (click)="viewProductDetail(product.id!)"
              (error)="onImageError($event)"
            />
            <div class="product-info">
              <h4 class="product-name" (click)="viewProductDetail(product.id!)">
                {{ product.name }}
              </h4>
              <p class="product-price">{{ formatPrice(product.price) }}</p>
            </div>
            <div class="product-actions">
              <button
                class="btn btn-primary btn-sm"
                (click)="addToCart(product)"
                [disabled]="!product.quantity || product.quantity <= 0"
              >
                <fa-icon icon="shopping-cart" class="me-1"></fa-icon>
                Thêm vào giỏ
              </button>
              <button
                class="btn btn-danger btn-sm"
                (click)="removeFromWishlist(product)"
              >
                <fa-icon icon="trash" class="me-1"></fa-icon>
                Xóa
              </button>
            </div>
          </div>
        }
      </div>
    } @else {
      <div class="alert alert-warning">
        <fa-icon icon="heart-crack" class="me-2"></fa-icon>
        Danh sách yêu thích của bạn đang trống.
      </div>
    }
  } @else {
    <div class="alert alert-info">Đang tải danh sách yêu thích...</div>
  }
</div>
