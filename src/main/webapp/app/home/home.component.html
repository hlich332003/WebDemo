<section class="hero-section">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi WebDemo</h1>
    <p>N∆°i mua s·∫Øm tin c·∫≠y cho m·ªçi ng∆∞·ªùi</p>
    @if (!isAdmin()) {
      <a routerLink="/products" class="btn btn-primary">Mua s·∫Øm ngay</a>
    }
  </div>
</section>

<!-- Ph·∫ßn s·∫£n ph·∫©m b√°n ch·∫°y (HOT) - ∆ØU TI√äN H√ÄNG ƒê·∫¶U -->
<section class="best-sellers">
  <h2 class="section-title">üî• S·∫£n Ph·∫©m B√°n Ch·∫°y</h2>
  <div class="product-grid">
    @if (bestSellerProducts.length === 0) {
      <p>ƒêang c·∫≠p nh·∫≠t...</p>
    } @else {
      @for (product of bestSellerProducts; track product.id) {
        <div class="product-card-sm">
          <div class="badge-hot">HOT</div>
          <img
            [src]="product.imageUrl || 'content/images/default-product.svg'"
            [alt]="product.name"
            loading="lazy"
            (click)="viewProductDetail(product.id)"
            (error)="onImageError($event)"
          />
          <div class="product-info">
            <h4 class="product-name" (click)="viewProductDetail(product.id)">{{ product.name }}</h4>
            <p class="product-price">{{ formatPrice(product.price) }}</p>
            @if (product.quantity !== null && product.quantity !== undefined) {
              @if (product.quantity === 0) {
                <p class="stock text-danger fw-bold">‚ùå H·∫øt h√†ng</p>
              } @else if (product.quantity < 10) {
                <p class="stock text-warning">‚ö†Ô∏è Ch·ªâ c√≤n {{ product.quantity }} s·∫£n ph·∫©m</p>
              } @else {
                <p class="stock text-muted">C√≤n {{ product.quantity }} s·∫£n ph·∫©m</p>
              }
            }
            <button class="btn btn-sm btn-success" (click)="addToCart(product)" [disabled]="product.quantity === 0">
              {{ product.quantity === 0 ? 'H·∫øt h√†ng' : 'Th√™m v√†o gi·ªè' }}
            </button>
          </div>
        </div>
      }
    }
  </div>
</section>

<!-- Ph·∫ßn s·∫£n ph·∫©m m·ªõi nh·∫•t -->
<section class="new-products">
  <h2 class="section-title">‚ú® S·∫£n Ph·∫©m M·ªõi</h2>
  <div class="product-grid-large">
    @if (newProducts.length === 0) {
      <p>ƒêang c·∫≠p nh·∫≠t s·∫£n ph·∫©m m·ªõi...</p>
    } @else {
      @for (product of newProducts; track product.id) {
        <div class="product-card-sm">
          <div class="badge-new">NEW</div>
          <img
            [src]="product.imageUrl || 'content/images/default-product.svg'"
            [alt]="product.name"
            loading="lazy"
            (click)="viewProductDetail(product.id)"
            (error)="onImageError($event)"
          />
          <div class="product-info">
            <h4 class="product-name" (click)="viewProductDetail(product.id)">{{ product.name }}</h4>
            <p class="product-price">{{ formatPrice(product.price) }}</p>
            @if (product.quantity !== null && product.quantity !== undefined) {
              @if (product.quantity === 0) {
                <p class="stock text-danger fw-bold">‚ùå H·∫øt h√†ng</p>
              } @else if (product.quantity < 10) {
                <p class="stock text-warning">‚ö†Ô∏è Ch·ªâ c√≤n {{ product.quantity }} s·∫£n ph·∫©m</p>
              } @else {
                <p class="stock text-muted">C√≤n {{ product.quantity }} s·∫£n ph·∫©m</p>
              }
            }
            <button class="btn btn-sm btn-success" (click)="addToCart(product)" [disabled]="product.quantity === 0">
              {{ product.quantity === 0 ? 'H·∫øt h√†ng' : 'Th√™m v√†o gi·ªè' }}
            </button>
          </div>
        </div>
      }
    }
  </div>
</section>

<!-- Ph·∫ßn danh m·ª•c n·ªïi b·∫≠t -->
<section class="featured-categories">
  <div class="category-grid">
    @if (isLoading) {
      <p>ƒêang t·∫£i danh m·ª•c...</p>
    } @else if (featuredCategories.length === 0) {
      <p>Kh√¥ng c√≥ danh m·ª•c n·ªïi b·∫≠t n√†o.</p>
    } @else {
      @for (category of featuredCategories; track category.id) {
        <div class="category-card">
          <h3 class="category-title">{{ category.name }}</h3>
          <div class="product-preview-grid">
            @for (product of category.products?.slice(0, 8); track product.id) {
              <div class="product-card-sm">
                <img
                  [src]="product.imageUrl || 'content/images/default-product.svg'"
                  [alt]="product.name"
                  loading="lazy"
                  (click)="viewProductDetail(product.id)"
                  (error)="onImageError($event)"
                />
                <div class="product-info">
                  <h4 class="product-name" (click)="viewProductDetail(product.id)">{{ product.name }}</h4>
                  <p class="product-price">{{ formatPrice(product.price) }}</p>
                  @if (product.quantity !== null && product.quantity !== undefined) {
                    @if (product.quantity === 0) {
                      <p class="stock text-danger fw-bold">‚ùå H·∫øt h√†ng</p>
                    } @else if (product.quantity < 10) {
                      <p class="stock text-warning">‚ö†Ô∏è C√≤n {{ product.quantity }}</p>
                    } @else {
                      <p class="stock text-muted">C√≤n {{ product.quantity }}</p>
                    }
                  }
                  <button class="btn btn-sm btn-success" (click)="addToCart(product)" [disabled]="product.quantity === 0">
                    {{ product.quantity === 0 ? 'H·∫øt h√†ng' : 'Th√™m v√†o gi·ªè' }}
                  </button>
                </div>
              </div>
            }
          </div>
          <a [routerLink]="['/products']" [queryParams]="{ categorySlug: category.slug }" class="view-all-link"
            >Xem t·∫•t c·∫£ {{ category.name }} ‚Üí</a
          >
        </div>
      }
    }
  </div>
</section>
