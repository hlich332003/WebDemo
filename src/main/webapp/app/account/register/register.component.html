<div class="register-container">
  <div class="register-card">
    <h1 data-cy="registerTitle">Tạo tài khoản</h1>

    @if (success()) {
      <div class="alert alert-success">
        <h4 class="alert-heading">Đăng ký thành công!</h4>
        <p>Tài khoản của bạn đã được tạo. Vui lòng kiểm tra email để nhận link kích hoạt tài khoản.</p>
        <hr />
        <p class="mb-0">Sau khi kích hoạt, bạn có thể đăng nhập vào hệ thống.</p>
      </div>
      <div class="text-center mt-3">
        <a class="btn btn-primary" routerLink="/login">Đi đến trang đăng nhập</a>
      </div>
      <div class="mt-3 text-center">
        <span>Bạn đã có tài khoản? </span>
        <a class="alert-link" routerLink="/login">Đăng nhập</a>
      </div>
    }

    @if (error()) {
      <div class="alert alert-danger"><strong>Đăng ký thất bại!</strong> Vui lòng thử lại sau.</div>
    }

    @if (errorUserExists()) {
      <div class="alert alert-danger"><strong>Email này đã được đăng ký!</strong> Vui lòng chọn email khác.</div>
    }

    @if (errorEmailExists()) {
      <div class="alert alert-danger"><strong>Email này đã được sử dụng!</strong> Vui lòng chọn email khác.</div>
    }

    @if (doNotMatch()) {
      <div class="alert alert-danger">Mật khẩu và xác nhận mật khẩu không khớp!</div>
    }

    @if (!success()) {
      <form name="form" (ngSubmit)="register()" [formGroup]="registerForm" novalidate>
        <div class="row">
          <div class="col-md-6 form-group">
            <label class="form-label" for="firstName">Họ</label>
            <input type="text" class="form-control" id="firstName" formControlName="firstName" />
          </div>
          <div class="col-md-6 form-group">
            <label class="form-label" for="lastName">Tên</label>
            <input type="text" class="form-control" id="lastName" formControlName="lastName" />
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="email">Email</label>
          <input type="email" class="form-control" id="email" formControlName="email" data-cy="email" #email />
        </div>

        <div class="form-group">
          <label class="form-label" for="phone">Số điện thoại</label>
          <input type="tel" class="form-control" id="phone" formControlName="phone" data-cy="phone" />
        </div>

        <div class="form-group">
          <label class="form-label" for="password">Mật khẩu</label>
          <input type="password" class="form-control" id="password" formControlName="password" data-cy="firstPassword" />
          <jhi-password-strength-bar [passwordToCheck]="registerForm.get('password')!.value" />
        </div>

        <div class="form-group">
          <label class="form-label" for="confirmPassword">Xác nhận mật khẩu</label>
          <input type="password" class="form-control" id="confirmPassword" formControlName="confirmPassword" data-cy="secondPassword" />
        </div>

        <button type="submit" [disabled]="registerForm.invalid" class="btn btn-primary btn-register" data-cy="submit">Đăng ký</button>
      </form>

      <div class="mt-3 text-center">
        <span>Bạn đã có tài khoản? </span>
        <a class="alert-link" routerLink="/login">Đăng nhập</a>
      </div>
    }
  </div>
</div>
